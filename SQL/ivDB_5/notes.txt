Представления

Цели:

- Для направления, упрощения и настройки восприятия информации в базе данных каждым пользователем.

- В качестве механизма безопасности, позволяющего пользователям обращаться к данным через представления, но не предоставляя им разрешений на непосредственный доступ к базовым таблицам.

- Для предоставления интерфейса обратной совместимости, моделирующего таблицу, схема которой изменилась.

CREATE VIEW
https://msdn.microsoft.com/ru-ru/library/ms187956.aspx



Обновляемые представления
Можно изменять данные базовой таблицы через представление до тех пор, пока выполняются следующие условия:

1. Любые изменения, в том числе инструкции UPDATE, INSERT и DELETE, должны ссылаться на столбцы только одной базовой таблицы.

2. Изменяемые в представлении столбцы должны непосредственно ссылаться на данные столбцов базовой таблицы. Столбцы нельзя сформировать каким-либо другим образом, в том числе:
- при помощи агрегатной функции: AVG, COUNT, SUM, MIN, MAX, GROUPING, STDEV, STDEVP, VAR и VARP;
- на основе вычисления. Столбец нельзя вычислить по выражению, включающему другие столбцы. Столбцы, сформированные при помощи операторов UNION, UNION ALL, CROSSJOIN, EXCEPT и INTERSECT, считаются вычисляемыми и также не являются обновляемыми.

3. Предложения GROUP BY, HAVING и DISTINCT не влияют на изменяемые столбцы.
Предложение TOP не используется нигде в инструкции select_statement представления вместе с предложением WITH CHECK OPTION.


По Груберу:

* Оно должно выводиться в одну и только в одну базовую таблицу.
* Оно должно содержать первичный ключ этой таблицы (это технически не пред-
писывается стандартом ANSI, но было бы неплохо придерживаться этого).
* Оно не должно иметь никаких полей, которые бы являлись агрегатными функ-
циями.
* Оно не должно содержать DISTINCT в своем определении.
* Оно не должно использовать GROUP BY или HAVING в своем определении.
* Оно не должно использовать подзапросы (это — ANSI ограничение, которое не
предписано для некоторых реализаций)
* Оно может быть использовано в другом представлении, но это представление
должно также быть модифицируемыми.
* Оно не должно использовать константы, строки, или выражения значений (на-
пример: comm * 100) среди выбранных полей вывода.
* Для INSERT, оно должно содержать любые поля основной таблицы, которые
имеют ограничение NOT NULL, если другое ограничение по умолчанию не определе-
но.